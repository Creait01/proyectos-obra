<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Wizard de Confirmación Masiva -->
    <record id="view_cash_register_mass_confirm_wizard_form" model="ir.ui.view">
        <field name="name">cash.register.mass.confirm.wizard.form</field>
        <field name="model">cash.register.mass.confirm.wizard</field>
        <field name="arch" type="xml">
            <form string="Confirmación Masiva de Cierres">
                <group>
                    <group string="Rango de Fechas">
                        <field name="date_from"/>
                        <field name="date_to"/>
                    </group>
                    <group string="Filtros">
                        <field name="company_ids" widget="many2many_tags" 
                               options="{'no_create': True}"
                               placeholder="Todas las compañías"/>
                    </group>
                </group>
                
                <!-- Resumen de cierres -->
                <div class="row mt-4 mb-4">
                    <div class="col-6">
                        <div class="card" style="background: #fff3cd; border-left: 4px solid #ffc107;">
                            <div class="card-body text-center py-3">
                                <small class="text-muted d-block">Pendientes de Confirmar</small>
                                <h2 class="mb-0" style="color: #856404;">
                                    <field name="closes_to_confirm" readonly="1"/>
                                </h2>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card" style="background: #d4edda; border-left: 4px solid #28a745;">
                            <div class="card-body text-center py-3">
                                <small class="text-muted d-block">Ya Confirmados</small>
                                <h2 class="mb-0 text-success">
                                    <field name="closes_already_confirmed" readonly="1"/>
                                </h2>
                            </div>
                        </div>
                    </div>
                </div>
                
                <field name="close_ids" invisible="1"/>
                
                <footer>
                    <button string="✓ Confirmar Todos" name="action_confirm_all" type="object" 
                            class="btn-primary" icon="fa-check-circle"
                            attrs="{'invisible': [('closes_to_confirm', '=', 0)]}"
                            confirm="¿Está seguro de confirmar todos los cierres pendientes? Esta acción no se puede deshacer."/>
                    <button string="Ver Cierres" name="action_view_closes" type="object" 
                            class="btn-secondary" icon="fa-list"
                            attrs="{'invisible': [('closes_to_confirm', '=', 0)]}"/>
                    <button string="Cancelar" class="btn-secondary" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>

    <!-- Acción del Wizard -->
    <record id="action_cash_register_mass_confirm_wizard" model="ir.actions.act_window">
        <field name="name">Confirmación Masiva de Cierres</field>
        <field name="res_model">cash.register.mass.confirm.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>
    
    <!-- Menú movido a views/menu_views.xml para evitar problemas de dependencias -->
</odoo>
